<overlay:ToggleableOverlayBase x:Class="HearthStoneDT.UI.Views.DeckWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:overlay="clr-namespace:HearthStoneDT.UI.Overlay"
        xmlns:conv="clr-namespace:HearthStoneDT.UI.Converters"
        Title="DECK"
        Width="240"
        SizeToContent="Height"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        Topmost="True"
        MouseLeftButtonDown="DeckWindow_MouseLeftButtonDown">
        <overlay:ToggleableOverlayBase.Resources>
            <conv:RarityToBrushConverter x:Key="RarityBrush"/>

            <!-- Keep rarity color, but dim cards that have Count==0 (white->gray, blue->gray-blue, etc.) -->
            <Style x:Key="DimWhenZero" TargetType="TextBlock">
                <Setter Property="Opacity" Value="1"/>
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Count}" Value="0">
                        <Setter Property="Opacity" Value="0.45"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </overlay:ToggleableOverlayBase.Resources>
    <Border Background="#CC111111" CornerRadius="10" Padding="10">
        <DockPanel>
            <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,2" DockPanel.Dock ="Top">
                <TextBlock x:Name="DeckNameText"
                        Foreground="#E6E6E6"
                        FontSize="20"
                        FontWeight="SemiBold"
                        TextTrimming="CharacterEllipsis"/>

                <TextBlock x:Name="DeckCountText"
                        Margin="8,0,0,0"
                        Foreground="#8A8A8A"
                        FontSize="12"
                        HorizontalAlignment="Right"
                        VerticalAlignment="Bottom"/>
            </StackPanel>
            <ListBox Grid.Row="2"
                    x:Name="OverlayCardList"
                    Background="Transparent"
                    BorderThickness="0"
                    ScrollViewer.VerticalScrollBarVisibility="Auto">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Border BorderBrush="#333333" BorderThickness="0,0,0,1" Padding="2">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="20"/>
                                    <ColumnDefinition Width="150"/>
                                    <ColumnDefinition Width="30"/>
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Column="0" Text="{Binding Cost}" Foreground="#9CDCFE" FontWeight="SemiBold"
                                           Style="{StaticResource DimWhenZero}"/>
                                <TextBlock Grid.Column="1"
                                        Text="{Binding Name}"
                                        Foreground="{Binding Rarity, Converter={StaticResource RarityBrush}}"
                                        Margin="6,0,8,0"
                                        TextTrimming="CharacterEllipsis"
                                        Style="{StaticResource DimWhenZero}"/>
                                <TextBlock Grid.Column="2" Text="{Binding Count}" Foreground="#E6E6E6"
                                        HorizontalAlignment="Right" FontWeight="SemiBold"
                                        Style="{StaticResource DimWhenZero}"/>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

        </DockPanel>
    </Border>
</overlay:ToggleableOverlayBase>
